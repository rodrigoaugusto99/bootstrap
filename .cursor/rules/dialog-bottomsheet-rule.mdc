---
alwaysApply: false
---

# jamais mexa no construtor dos arquivos de view de bottom sheets e dialogs.

# Dialogs — Padrão de Implementação

## Estrutura de Arquivos

- Todos os dialogs ficam em `lib/ui/dialogs/`.
- Cada dialog possui dois arquivos:
  - `nome_dialog.dart` → View
  - `nome_dialog_model.dart` → ViewModel
- **Você nunca precisa criar os arquivos manualmente**, eles já existirão.

---

## Estrutura da View

```dart
class ConfirmationDialog extends StackedView<ConfirmationDialogModel> {
  final DialogRequest request;
  final Function(DialogResponse) completer;

  const ConfirmationDialog({
    Key? key,
    required this.request,
    required this.completer,
  }) : super(key: key);

  @override
  Widget builder(
    BuildContext context,
    ConfirmationDialogModel viewModel,
    Widget? child,
  ) {
    final data = request.data as AppDialogSchema;

    return Dialog(
      ...
    );
  }

  @override
  ConfirmationDialogModel viewModelBuilder(BuildContext context) =>
      ConfirmationDialogModel(completer: completer);
}
```

---

## Estrutura da ViewModel:

```dart
class ConfirmationDialogModel extends BaseViewModel {
  final Function(DialogResponse response)? completer;

  ConfirmationDialogModel({this.completer});

  void onPressed() {
    completer!(DialogResponse(confirmed: true, data: ''));
  }
}
```

## chamando método da viewmodel na view:

```dart
onPressed: viewModel.onPressed

onPressed: () => viewModel.onPressed()
```

---

## Como chamar um dialog

```dart
final response = await _dialogService.showCustomDialog(
  variant: DialogType.confirmation,
  barrierDismissible: true,
  data: AppDialogSchema(
    title: 'Sair da conta',
    description: 'Tem certeza que deseja sair da conta?',
    firstButtonText: 'Não, voltar',
    secondButtonText: 'Sim, sair',
  ),
);

if (response == null || !response.confirmed) return;

//todo: Código a ser rodado caso "confirmed" seja true.
```

### Observações:

- `variant` deve ser exatamente o **nome da classe do dialog** (ex: `ConfirmationDialog` → `DialogType.confirmation`)
- O parâmetro `data` é dynamic, mas caso tenha muitos parâmetros, criamos um schema `AppDialogSchema` no diretório do dialog 
- A verificação `if (response == null || !response.confirmed)` é **padrão** e serve para aplicar early return se o usuário cancelou ou fechou o dialog.

---

# BOTTOMSHEETS

## funcionam da mesma forma que os dialogs, mas com essas mudanças:

- os bottomsheets ficam no arquivo /lib/ui/bottom_sheets
- DialogResponse vira SheetResponse
- showCustomDialog vira showCustomSheet
- DialogType vira BottomSheetType
